<!DOCTYPE html>
<html>

<head>
    <title>django-websocket</title>
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
</head>
<style>
    #cas{
            display: block;
            border:1px solid;
            margin:auto;
        }
        .container {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            background-color: #000000;
        }
        html,body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
</style>

<body>
    <div style="width:100%;height:100%">
        <div>
            <!-- <canvas id='cas' width="1000" height="500">浏览器不支持canvas，请更新浏览器后再浏览</canvas>
            <div style="width:50px;margin:10px auto">
                <button id="controlBtn">停止</button>
            </div> -->
        </div>
        <!-- <div style="width:100%;height:80%">
            <canvas id="output" width="1366" height="768"></canvas>
        </div>
        <div style="margin:10px auto">
            <button type="button" id="connect_websocket">连接 websocket</button>
            <button type="button" id="receive_websocket">接收 websocket</button>
            <button type="button" id="send_message">发送 message</button>
            <button type="button" id="close_websocket">关闭 websocket</button>
        </div> -->
        <div id="jsi-particle-container" class="container"></div>
    </div>
</body>
<script src='/static/load.js'></script>
<script type="text/javascript">
    $(function () {
        // var back = document.getElementById('output');
        // var ctx = back.getContext('2d');
        $('#connect_websocket').click(function () {
            if (window.s) {
                window.s.close()
            }
            /*创建socket连接*/
            var socket = new WebSocket("ws://" + '127.0.0.1:8000' + "/rec/snake/?clientid=" + clientid)
            socket.onopen = function () {
                console.log('WebSocket open'); //成功连接上Websocket
            };
            socket.onmessage = function (e) {
                console.log('message: ' + e.data); //打印出服务端返回过来的数据
            };
            // Call onopen directly if socket is already open
            if (socket.readyState == WebSocket.OPEN) socket.onopen();
            window.s = socket;
        });
    });
</script>

</html>